# MESSENGER 51 - Книга Ольга (CPLUS - 1007)

Доброго времени суток. 

Я представляю Вашему вниманию прототип своего приложения для обмена сообщениями. 
Он состоит из клиентской и серверной части. Так как главная задача дипломного проекта состояла в разработке GUI для серверной части приложения, именно на ней я сосредоточила внимание.
Так же так как это прототип многие функции в нём ещё не реализованы. Свои планы по развитию приложения я изложу в конце.
Для запуска приложения Вам будет необходимы **Qt** и **SQLite**.

Знакомство с кодом серверной части я рекомендую проводить в следующем порядке:
  1. ServerWindow (отвечает за сервер и связь с клиентом)
  2. Login_moder_Form (окно входа в интерфейс модератора)
  3. Moderator_basement (непосредственно интерфейс работы модератора с данными базы данных)
  4. ban_users, see_all_users, see_messages (отдельные окна, открываемые модератором)

**!! ВАЖНО перед запуском приложения СЕРВЕРА !!**:
  1. Т.к. используемый QDataStream зависит от версии Qt в ServerWindow необходимо заменить выражения в "setVersion(QDataStream::*Qt_6_6*)" "Qt_6_6" на Вашу версию
  2. Такую же операцию необходимо потом будет провести и в клиентской части приложения
  3. В 33 строке кода в фразе "DBase.setDatabaseName(*name*)" необходимо указать Ваш путь к базе данных (полный!)
  4. Для входа в аккаунт модератора используйте следующие данные: Login - Mort / Password - Mort
  5. Для корректной работы приложения не закрывайте первое и второе окно (ServerWindow и Moderator_basement)

Приложение можно запустить как в режиме отладки, так и выпустив его. Для выпуска приложения необходимо:
  1. Скопировать данные из репозитория / сам репозиторий к себе на компьютер
  2. Открыть его в Qt и собрать в release версию (выпуск)
  3. В собранной при этом папке открыть папку release и удаляем все файлы кроме необходимого exe
  4. В папке, где у Вас установлен Qt, открываем папку с Вашей версией, с Вашим компилятором, а после bin
  5. Находим там файл windeployqt.exe, нажимаем на него (не запускаем) и перетаскиваем наш exe из пункта 3 на утелиту
  6. В случае возникновения ошибки догружаем необходимые библиотеки из bin


Знакомство с кодом клиентской части я рекомендую проводить в следующем порядке:
  1. ClientWindow (отвечает за создание сокета клиента)
  2. Enter_Form (окно входа в интерфейс клиента)
  3. Main_Form (непосредственно интерфейс обмена сообщениями клиентов)

**!! ВАЖНО перед запуском приложения КЛИЕНТА !!**:
К сожалению, ознакомиться с логикой работы клиента Вы можете только при отладке в Qt, протестировать его работу не удаться. 
Связано это с тем, что уже на последних этапах работы я столкнулась с тем, что созданные сокеты нельзя делить между разными процессами. 
А так клиентская часть приложения разделена у меня на несколько окон, то созданные после окна не получают необходимые сигналы от сервера.
Способы решения проблемы я вижу следующие: изменение архитектуры приложения, чтобы все связанные с сервером операции происходили в одном окне, использование WSADuplicateSocket / fork(). 
К сожалению, времени разобраться в вопросе и решить его у меня не осталось, но, думаю, при её решении приложение бы работало исправно. Его логику я подробно описала в комментариях к коду.


Будущие направления работы:
  1. Решение проблемы разделения клиентского сокета
  2. Добавление перевода приложения
  3. Реализация возможности отключения модератором активного пользователя от сервера
  4. Добавление клиенту возможности банить пользователей
